{"id":"../node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js.map","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/src/Auth/VerifyContact.jsx","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552223257578},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/package.json","includedInParent":true,"mtime":1552220008284},{"name":"react","loc":{"line":25,"column":20},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/react/index.js"},{"name":"@aws-amplify/core","loc":{"line":26,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/index.js"},{"name":"@aws-amplify/auth","loc":{"line":27,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/auth/lib/index.js"},{"name":"./AuthPiece","loc":{"line":28,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/AuthPiece.js"},{"name":"../AmplifyTheme","loc":{"line":29,"column":29},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/AmplifyTheme.js"},{"name":"../Amplify-UI/Amplify-UI-Components-React","loc":{"line":30,"column":44},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Components-React.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar core_1 = require(\"@aws-amplify/core\");\nvar auth_1 = require(\"@aws-amplify/auth\");\nvar AuthPiece_1 = require(\"./AuthPiece\");\nvar AmplifyTheme_1 = require(\"../AmplifyTheme\");\nvar Amplify_UI_Components_React_1 = require(\"../Amplify-UI/Amplify-UI-Components-React\");\nvar logger = new core_1.ConsoleLogger('VerifyContact');\nvar VerifyContact = /** @class */ (function (_super) {\n    __extends(VerifyContact, _super);\n    function VerifyContact(props) {\n        var _this = _super.call(this, props) || this;\n        _this._validAuthStates = ['verifyContact'];\n        _this.verify = _this.verify.bind(_this);\n        _this.submit = _this.submit.bind(_this);\n        _this.state = { verifyAttr: null };\n        return _this;\n    }\n    VerifyContact.prototype.verify = function () {\n        var _this = this;\n        var _a = this.inputs, contact = _a.contact, checkedValue = _a.checkedValue;\n        if (!contact) {\n            this.error('Neither Email nor Phone Number selected');\n            return;\n        }\n        if (!auth_1.default || typeof auth_1.default.verifyCurrentUserAttribute !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        auth_1.default.verifyCurrentUserAttribute(checkedValue)\n            .then(function (data) {\n            logger.debug(data);\n            _this.setState({ verifyAttr: checkedValue });\n        })\n            .catch(function (err) { return _this.error(err); });\n    };\n    VerifyContact.prototype.submit = function () {\n        var _this = this;\n        var attr = this.state.verifyAttr;\n        var code = this.inputs.code;\n        if (!auth_1.default || typeof auth_1.default.verifyCurrentUserAttributeSubmit !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        auth_1.default.verifyCurrentUserAttributeSubmit(attr, code)\n            .then(function (data) {\n            logger.debug(data);\n            _this.changeState('signedIn', _this.props.authData);\n            _this.setState({ verifyAttr: null });\n        })\n            .catch(function (err) { return _this.error(err); });\n    };\n    VerifyContact.prototype.verifyView = function () {\n        var user = this.props.authData;\n        if (!user) {\n            logger.debug('no user for verify');\n            return null;\n        }\n        var unverified = user.unverified;\n        if (!unverified) {\n            logger.debug('no unverified on user');\n            return null;\n        }\n        var email = unverified.email, phone_number = unverified.phone_number;\n        var theme = this.props.theme || AmplifyTheme_1.default;\n        return (React.createElement(\"div\", null,\n            email ? React.createElement(Amplify_UI_Components_React_1.RadioRow, { placeholder: core_1.I18n.get('Email'), theme: theme, key: \"email\", name: \"contact\", value: \"email\", onChange: this.handleInputChange }) : null,\n            phone_number ? React.createElement(Amplify_UI_Components_React_1.RadioRow, { placeholder: core_1.I18n.get('Phone Number'), theme: theme, key: \"phone_number\", name: \"contact\", value: \"phone_number\", onChange: this.handleInputChange }) : null));\n    };\n    VerifyContact.prototype.submitView = function () {\n        var theme = this.props.theme || AmplifyTheme_1.default;\n        return (React.createElement(\"div\", null,\n            React.createElement(Amplify_UI_Components_React_1.Input, { placeholder: core_1.I18n.get('Code'), theme: theme, key: \"code\", name: \"code\", autoComplete: \"off\", onChange: this.handleInputChange })));\n    };\n    VerifyContact.prototype.showComponent = function (theme) {\n        var _this = this;\n        var _a = this.props, authData = _a.authData, hide = _a.hide;\n        if (hide && hide.includes(VerifyContact)) {\n            return null;\n        }\n        return (React.createElement(Amplify_UI_Components_React_1.FormSection, { theme: theme },\n            React.createElement(Amplify_UI_Components_React_1.SectionHeader, { theme: theme }, core_1.I18n.get('Account recovery requires verified contact information')),\n            React.createElement(Amplify_UI_Components_React_1.SectionBody, { theme: theme }, this.state.verifyAttr ? this.submitView() : this.verifyView()),\n            React.createElement(Amplify_UI_Components_React_1.SectionFooter, { theme: theme },\n                React.createElement(Amplify_UI_Components_React_1.SectionFooterPrimaryContent, { theme: theme }, this.state.verifyAttr ?\n                    React.createElement(Amplify_UI_Components_React_1.Button, { theme: theme, onClick: this.submit }, core_1.I18n.get('Submit')) :\n                    React.createElement(Amplify_UI_Components_React_1.Button, { theme: theme, onClick: this.verify }, core_1.I18n.get('Verify'))),\n                React.createElement(Amplify_UI_Components_React_1.SectionFooterSecondaryContent, { theme: theme },\n                    React.createElement(Amplify_UI_Components_React_1.Link, { theme: theme, onClick: function () { return _this.changeState('signedIn', authData); } }, core_1.I18n.get('Skip'))))));\n    };\n    return VerifyContact;\n}(AuthPiece_1.default));\nexports.default = VerifyContact;\n"},"sourceMaps":{"js":{"version":3,"file":"VerifyContact.js","sourceRoot":"","sources":["../../src/Auth/VerifyContact.jsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport * as React from 'react';\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\n\nimport AuthPiece from './AuthPiece';\nimport AmplifyTheme from '../AmplifyTheme';\nimport {\n    FormSection,\n    SectionHeader,\n    SectionBody,\n    SectionFooter,\n    Input,\n    RadioRow,\n    Button,\n    Link,\n    SectionFooterPrimaryContent,\n    SectionFooterSecondaryContent\n} from '../Amplify-UI/Amplify-UI-Components-React';\n\nconst logger = new Logger('VerifyContact');\n\nexport default class VerifyContact extends AuthPiece {\n    constructor(props) {\n        super(props);\n\n        this._validAuthStates = ['verifyContact'];\n        this.verify = this.verify.bind(this);\n        this.submit = this.submit.bind(this);\n\n        this.state = { verifyAttr: null };\n    }\n\n    verify() {\n        const { contact, checkedValue } = this.inputs;\n        if (!contact) {\n            this.error('Neither Email nor Phone Number selected');\n            return;\n        }\n\n        if (!Auth || typeof Auth.verifyCurrentUserAttribute !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n\n        Auth.verifyCurrentUserAttribute(checkedValue)\n            .then(data => {\n                logger.debug(data);\n                this.setState({ verifyAttr: checkedValue });\n            })\n            .catch(err => this.error(err));\n    }\n\n    submit() {\n        const attr = this.state.verifyAttr;\n        const { code } = this.inputs;\n        if (!Auth || typeof Auth.verifyCurrentUserAttributeSubmit !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        Auth.verifyCurrentUserAttributeSubmit(attr, code)\n            .then(data => {\n                logger.debug(data);\n                this.changeState('signedIn', this.props.authData);\n                this.setState({ verifyAttr: null });\n            })\n            .catch(err => this.error(err));\n    }\n\n    verifyView() {\n        const user = this.props.authData;\n        if (!user) {\n            logger.debug('no user for verify');\n            return null;\n        }\n        const { unverified } = user;\n        if (!unverified) {\n            logger.debug('no unverified on user');\n            return null;\n        }\n        const { email, phone_number } = unverified;\n        const theme = this.props.theme || AmplifyTheme;\n        return (\n            <div>\n                { email? <RadioRow\n                            placeholder={I18n.get('Email')}\n                            theme={theme}\n                            key=\"email\"\n                            name=\"contact\"\n                            value=\"email\"\n                            onChange={this.handleInputChange}\n                         /> : null\n                }\n                { phone_number? <RadioRow\n                                    placeholder={I18n.get('Phone Number')}\n                                    theme={theme}\n                                    key=\"phone_number\"\n                                    name=\"contact\"\n                                    value=\"phone_number\"\n                                    onChange={this.handleInputChange}\n                                /> : null\n                }\n            </div>\n        );\n    }\n\n    submitView() {\n        const theme = this.props.theme || AmplifyTheme;\n        return (\n            <div>\n                <Input\n                    placeholder={I18n.get('Code')}\n                    theme={theme}\n                    key=\"code\"\n                    name=\"code\"\n                    autoComplete=\"off\"\n                    onChange={this.handleInputChange}\n                />\n            </div>\n        );\n    }\n\n    showComponent(theme) {\n        const { authData, hide } = this.props;\n        if (hide && hide.includes(VerifyContact)) { return null; }\n\n        return (\n            <FormSection theme={theme}>\n                <SectionHeader theme={theme}>\n                    {I18n.get('Account recovery requires verified contact information')}\n                </SectionHeader>\n                <SectionBody theme={theme}>\n                    { this.state.verifyAttr ? this.submitView() : this.verifyView() }\n                </SectionBody>\n                <SectionFooter theme={theme}>\n                    <SectionFooterPrimaryContent theme={theme}>\n                        { this.state.verifyAttr ?\n                            <Button theme={theme} onClick={this.submit}>{I18n.get('Submit')}</Button> :\n                            <Button theme={theme} onClick={this.verify}>{I18n.get('Verify')}</Button>\n                        }\n                    </SectionFooterPrimaryContent>\n                    <SectionFooterSecondaryContent theme={theme}>\n                        <Link theme={theme} onClick={() => this.changeState('signedIn', authData)}>\n                            {I18n.get('Skip')}\n                        </Link>\n                    </SectionFooterSecondaryContent>\n                </SectionFooter>\n            </FormSection>\n        );\n    }\n}\n"]}},"error":null,"hash":"e7a2b267f6aac1d1e4c861d2683ddecf","cacheData":{"env":{}}}