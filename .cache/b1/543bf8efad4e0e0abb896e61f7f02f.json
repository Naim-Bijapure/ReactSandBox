{"id":"../node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js.map","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/src/Auth/TOTPSetup.jsx","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552220018357},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/package.json","includedInParent":true,"mtime":1552220008284},{"name":"react","loc":{"line":33,"column":20},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/react/index.js"},{"name":"@aws-amplify/core","loc":{"line":34,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/index.js"},{"name":"@aws-amplify/auth","loc":{"line":35,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/auth/lib/index.js"},{"name":"./AuthPiece","loc":{"line":36,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/AuthPiece.js"},{"name":"../Widget/TOTPSetupComp","loc":{"line":37,"column":30},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Widget/TOTPSetupComp.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar core_1 = require(\"@aws-amplify/core\");\nvar auth_1 = require(\"@aws-amplify/auth\");\nvar AuthPiece_1 = require(\"./AuthPiece\");\nvar TOTPSetupComp_1 = require(\"../Widget/TOTPSetupComp\");\nvar logger = new core_1.ConsoleLogger('TOTPSetup');\nvar TOTPSetup = /** @class */ (function (_super) {\n    __extends(TOTPSetup, _super);\n    function TOTPSetup(props) {\n        var _this = _super.call(this, props) || this;\n        _this._validAuthStates = ['TOTPSetup'];\n        _this.onTOTPEvent = _this.onTOTPEvent.bind(_this);\n        _this.checkContact = _this.checkContact.bind(_this);\n        return _this;\n    }\n    TOTPSetup.prototype.checkContact = function (user) {\n        var _this = this;\n        if (!auth_1.default || typeof auth_1.default.verifiedContact !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        auth_1.default.verifiedContact(user)\n            .then(function (data) {\n            if (!core_1.JS.isEmpty(data.verified)) {\n                _this.changeState('signedIn', user);\n            }\n            else {\n                var newUser = Object.assign(user, data);\n                _this.changeState('verifyContact', newUser);\n            }\n        });\n    };\n    TOTPSetup.prototype.onTOTPEvent = function (event, data, user) {\n        logger.debug('on totp event', event, data);\n        // const user = this.props.authData;\n        if (event === 'Setup TOTP') {\n            if (data === 'SUCCESS') {\n                this.checkContact(user);\n            }\n        }\n    };\n    TOTPSetup.prototype.showComponent = function (theme) {\n        var hide = this.props.hide;\n        if (hide && hide.includes(TOTPSetup)) {\n            return null;\n        }\n        return (React.createElement(TOTPSetupComp_1.default, __assign({}, this.props, { onTOTPEvent: this.onTOTPEvent })));\n    };\n    return TOTPSetup;\n}(AuthPiece_1.default));\nexports.default = TOTPSetup;\n"},"sourceMaps":{"js":{"version":3,"file":"TOTPSetup.js","sourceRoot":"","sources":["../../src/Auth/TOTPSetup.jsx"],"names":[],"mappings":";AAAA;;;;;;;;;;;GAWG;;;;;;;;;;;;;;;;;;;;AAEH,6BAA+B;AAC/B,0CAAgE;AAChE,0CAAqC;AACrC,yCAAoC;AACpC,yDAAoD;AAEpD,IAAM,MAAM,GAAG,IAAI,oBAAM,CAAC,WAAW,CAAC,CAAC;AAEvC;IAAuC,6BAAS;IAC5C,mBAAY,KAAK;QAAjB,YACI,kBAAM,KAAK,CAAC,SAKf;QAHG,KAAI,CAAC,gBAAgB,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC/C,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;IACrD,CAAC;IAED,gCAAY,GAAZ,UAAa,IAAI;QAAjB,iBAaC;QAZG,IAAI,CAAC,cAAI,IAAI,OAAO,cAAI,CAAC,eAAe,KAAK,UAAU,EAAE;YACrD,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;SACxF;QACD,cAAI,CAAC,eAAe,CAAC,IAAI,CAAC;aACrB,IAAI,CAAC,UAAA,IAAI;YACN,IAAI,CAAC,SAAE,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAC5B,KAAI,CAAC,WAAW,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;aACtC;iBAAM;gBACH,IAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC1C,KAAI,CAAC,WAAW,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;aAC9C;QACL,CAAC,CAAC,CAAC;IACX,CAAC;IAED,+BAAW,GAAX,UAAY,KAAK,EAAE,IAAI,EAAE,IAAI;QACzB,MAAM,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAC3C,oCAAoC;QACpC,IAAI,KAAK,KAAK,YAAY,EAAE;YACxB,IAAI,IAAI,KAAK,SAAS,EAAE;gBACpB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;aAC3B;SACJ;IACL,CAAC;IAED,iCAAa,GAAb,UAAc,KAAK;QACP,IAAA,sBAAI,CAAgB;QAC5B,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YAAE,OAAO,IAAI,CAAC;SAAE;QAEtD,OAAO,CACH,oBAAC,uBAAa,eAAK,IAAI,CAAC,KAAK,IAAE,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,CACnE,CAAC;IACN,CAAC;IACL,gBAAC;AAAD,CAAC,AA1CD,CAAuC,mBAAS,GA0C/C","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport * as React from 'react';\nimport { JS, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\nimport AuthPiece from './AuthPiece';\nimport TOTPSetupComp from '../Widget/TOTPSetupComp';\n\nconst logger = new Logger('TOTPSetup');\n\nexport default class TOTPSetup extends AuthPiece {\n    constructor(props) {\n        super(props);\n\n        this._validAuthStates = ['TOTPSetup'];\n        this.onTOTPEvent = this.onTOTPEvent.bind(this);\n        this.checkContact = this.checkContact.bind(this);\n    }\n\n    checkContact(user) {\n        if (!Auth || typeof Auth.verifiedContact !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        Auth.verifiedContact(user)\n            .then(data => {\n                if (!JS.isEmpty(data.verified)) {\n                    this.changeState('signedIn', user);\n                } else {\n                    const newUser = Object.assign(user, data);\n                    this.changeState('verifyContact', newUser);\n                }\n            });\n    }\n\n    onTOTPEvent(event, data, user) {\n        logger.debug('on totp event', event, data);\n        // const user = this.props.authData;\n        if (event === 'Setup TOTP') {\n            if (data === 'SUCCESS') {\n                this.checkContact(user);\n            }\n        }\n    }\n\n    showComponent(theme) {\n        const { hide } = this.props;\n        if (hide && hide.includes(TOTPSetup)) { return null; }\n\n        return (\n            <TOTPSetupComp {...this.props} onTOTPEvent={this.onTOTPEvent} />\n        );\n    }\n}\n"]}},"error":null,"hash":"4a8e22c11635bc905c166543777d15b8","cacheData":{"env":{}}}