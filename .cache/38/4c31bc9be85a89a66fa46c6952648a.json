{"id":"../node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js.map","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/src/Auth/Provider/withOAuth.jsx","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552220018357},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/package.json","includedInParent":true,"mtime":1552220008284},{"name":"react","loc":{"line":34,"column":22},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/react/index.js"},{"name":"@aws-amplify/core","loc":{"line":35,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/index.js"},{"name":"@aws-amplify/auth","loc":{"line":36,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/auth/lib/index.js"},{"name":"../../Amplify-UI/Amplify-UI-Theme","loc":{"line":37,"column":33},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Theme.js"},{"name":"@aws-amplify/ui","loc":{"line":38,"column":19},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/ui/dist/aws-amplify-ui.js"},{"name":"../../Amplify-UI/Amplify-UI-Components-React","loc":{"line":39,"column":44},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Components-React.js"},{"name":"../common/constants","loc":{"line":40,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withOAuth.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/common/constants.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar core_1 = require(\"@aws-amplify/core\");\nvar auth_1 = require(\"@aws-amplify/auth\");\nvar Amplify_UI_Theme_1 = require(\"../../Amplify-UI/Amplify-UI-Theme\");\nvar ui_1 = require(\"@aws-amplify/ui\");\nvar Amplify_UI_Components_React_1 = require(\"../../Amplify-UI/Amplify-UI-Components-React\");\nvar constants_1 = require(\"../common/constants\");\nvar logger = new core_1.ConsoleLogger('withOAuth');\nfunction withOAuth(Comp, options) {\n    return /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1(props) {\n            var _this = _super.call(this, props) || this;\n            _this.signIn = _this.signIn.bind(_this);\n            return _this;\n        }\n        class_1.prototype.signIn = function () {\n            if (!auth_1.default || typeof auth_1.default.configure !== 'function') {\n                throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n            }\n            var _a = auth_1.default.configure().oauth, oauth = _a === void 0 ? {} : _a;\n            // to keep backward compatibility\n            var cognitoHostedUIConfig = oauth ? (oauth['domain'] ? oauth : oauth.awsCognito) : undefined;\n            var config = this.props.oauth_config || options || cognitoHostedUIConfig;\n            logger.debug('withOAuth configuration', config);\n            var domain = config.domain, redirectSignIn = config.redirectSignIn, redirectSignOut = config.redirectSignOut, responseType = config.responseType;\n            var options = config.options || {};\n            var url = 'https://' + domain\n                + '/login?redirect_uri=' + redirectSignIn\n                + '&response_type=' + responseType\n                + '&client_id=' + (options.ClientId || auth_1.default.configure().userPoolWebClientId);\n            try {\n                localStorage.setItem(constants_1.default.SIGN_IN_WITH_HOSTEDUI_KEY, 'true');\n            }\n            catch (e) {\n                logger.debug('Failed to set item into localStorage', e);\n            }\n            window.location.assign(url);\n        };\n        class_1.prototype.render = function () {\n            return (React.createElement(Comp, __assign({}, this.props, { OAuthSignIn: this.signIn })));\n        };\n        return class_1;\n    }(react_1.Component));\n}\nexports.default = withOAuth;\nvar Button = function (props) { return (React.createElement(Amplify_UI_Components_React_1.SignInButton, { id: ui_1.oAuthSignInButton, onClick: props.OAuthSignIn, theme: props.theme || Amplify_UI_Theme_1.default, variant: 'oAuthSignInButton' },\n    React.createElement(Amplify_UI_Components_React_1.SignInButtonContent, { theme: props.theme || Amplify_UI_Theme_1.default }, core_1.I18n.get(props.label || 'Sign in with AWS')))); };\nexports.OAuthButton = withOAuth(Button);\n"},"sourceMaps":{"js":{"version":3,"file":"withOAuth.js","sourceRoot":"","sources":["../../../src/Auth/Provider/withOAuth.jsx"],"names":[],"mappings":";AAAA;;;;;;;;;;;GAWG;;;;;;;;;;;;;;;;;;;;AAEH,6BAA+B;AAC/B,+BAAkC;AAElC,0CAAkE;AAClE,0CAAqC;AACrC,sEAA6D;AAC7D,sCAAoD;AACpD,4FAGsD;AACtD,iDAA4C;AAE5C,IAAM,MAAM,GAAG,IAAI,oBAAM,CAAC,WAAW,CAAC,CAAC;AAEvC,mBAAkC,IAAI,EAAE,OAAO;IAC3C;QAAqB,2BAAS;QAC1B,iBAAY,KAAK;YAAjB,YACI,kBAAM,KAAK,CAAC,SAEf;YADG,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;QACzC,CAAC;QAED,wBAAM,GAAN;YACI,IAAI,CAAC,cAAI,IAAI,OAAO,cAAI,CAAC,SAAS,KAAK,UAAU,EAAE;gBAC/C,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;aACxF;YAEO,IAAA,qCAAQ,EAAR,+BAAQ,CAAsB;YACtC,iCAAiC;YACjC,IAAM,qBAAqB,GAAG,KAAK,CAAA,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC7F,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,IAAI,OAAO,IAAI,qBAAqB,CAAC;YAE3E,MAAM,CAAC,KAAK,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC;YAE5C,IAAA,sBAAM,EACN,sCAAc,EACd,wCAAe,EACf,kCAAY,CACL;YAEX,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;YACrC,IAAM,GAAG,GAAG,UAAU,GAAG,MAAM;kBACzB,sBAAsB,GAAG,cAAc;kBACvC,iBAAiB,GAAG,YAAY;kBAChC,aAAa,GAAG,CAAC,OAAO,CAAC,QAAQ,IAAI,cAAI,CAAC,SAAS,EAAE,CAAC,mBAAmB,CAAC,CAAC;YAEjF,IAAI;gBACA,YAAY,CAAC,OAAO,CAAC,mBAAS,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC;aACrE;YAAC,OAAO,CAAC,EAAE;gBACR,MAAM,CAAC,KAAK,CAAC,sCAAsC,EAAE,CAAC,CAAC,CAAC;aAC3D;YACD,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,CAAC;QAED,wBAAM,GAAN;YACI,OAAO,CACH,oBAAC,IAAI,eAAK,IAAI,CAAC,KAAK,IAAE,WAAW,EAAE,IAAI,CAAC,MAAM,IAAI,CACrD,CAAC;QACN,CAAC;QACL,cAAC;IAAD,CAAC,AA3CM,CAAc,iBAAS,GA2C5B;AACN,CAAC;AA7CD,4BA6CC;AAED,IAAM,MAAM,GAAG,UAAC,KAAK,IAAK,OAAA,CACtB,oBAAC,0CAAY,IACT,EAAE,EAAE,sBAAiB,EACrB,OAAO,EAAE,KAAK,CAAC,WAAW,EAC1B,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,0BAAY,EAClC,OAAO,EAAE,mBAAmB;IAE5B,oBAAC,iDAAmB,IAAC,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,0BAAY,IAClD,WAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,IAAI,kBAAkB,CAAC,CAC1B,CACX,CAClB,EAXyB,CAWzB,CAAC;AAEW,QAAA,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC","sourcesContent":["/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport * as React from 'react';\nimport { Component } from 'react';\n\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\nimport AmplifyTheme from '../../Amplify-UI/Amplify-UI-Theme';\nimport { oAuthSignInButton } from '@aws-amplify/ui';\nimport { \n    SignInButton, \n    SignInButtonContent\n} from '../../Amplify-UI/Amplify-UI-Components-React';\nimport Constants from '../common/constants';\n\nconst logger = new Logger('withOAuth');\n\nexport default function withOAuth(Comp, options) {\n    return class extends Component {\n        constructor(props) {\n            super(props);\n            this.signIn = this.signIn.bind(this);\n        }\n\n        signIn() {\n            if (!Auth || typeof Auth.configure !== 'function') {\n                throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n            }\n\n            const { oauth={} } = Auth.configure();\n            // to keep backward compatibility\n            const cognitoHostedUIConfig = oauth? (oauth['domain']? oauth : oauth.awsCognito) : undefined;\n            const config = this.props.oauth_config || options || cognitoHostedUIConfig;\n\n            logger.debug('withOAuth configuration', config);\n            const { \n                domain, \n                redirectSignIn,\n                redirectSignOut,\n                responseType\n            } = config;\n\n            const options = config.options || {};\n            const url = 'https://' + domain \n                + '/login?redirect_uri=' + redirectSignIn \n                + '&response_type=' + responseType \n                + '&client_id=' + (options.ClientId || Auth.configure().userPoolWebClientId);\n\n            try {\n                localStorage.setItem(Constants.SIGN_IN_WITH_HOSTEDUI_KEY, 'true');\n            } catch (e) {\n                logger.debug('Failed to set item into localStorage', e);\n            }\n            window.location.assign(url);\n        }\n\n        render() {\n            return (\n                <Comp {...this.props} OAuthSignIn={this.signIn} />\n            );\n        }\n    };\n}\n\nconst Button = (props) => (\n    <SignInButton\n        id={oAuthSignInButton}\n        onClick={props.OAuthSignIn}\n        theme={props.theme || AmplifyTheme}\n        variant={'oAuthSignInButton'}\n    >\n        <SignInButtonContent theme={props.theme || AmplifyTheme}>\n            {I18n.get(props.label || 'Sign in with AWS')}\n        </SignInButtonContent>\n    </SignInButton>\n);\n\nexport const OAuthButton = withOAuth(Button);\n"]}},"error":null,"hash":"d8719cec602e781aa9f90e189a8050c6","cacheData":{"env":{}}}