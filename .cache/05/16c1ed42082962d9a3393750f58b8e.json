{"id":"../node_modules/aws-amplify-react/dist/Auth/SignOut.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js.map","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/src/Auth/SignOut.jsx","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552220018357},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/package.json","includedInParent":true,"mtime":1552220008284},{"name":"react","loc":{"line":25,"column":20},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/react/index.js"},{"name":"@aws-amplify/core","loc":{"line":26,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/index.js"},{"name":"@aws-amplify/auth","loc":{"line":27,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/auth/lib/index.js"},{"name":"./AuthPiece","loc":{"line":28,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/AuthPiece.js"},{"name":"../Amplify-UI/Amplify-UI-Components-React","loc":{"line":29,"column":44},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Components-React.js"},{"name":"../Amplify-UI/Amplify-UI-Theme","loc":{"line":30,"column":33},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Theme.js"},{"name":"./common/constants","loc":{"line":31,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/SignOut.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/common/constants.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar core_1 = require(\"@aws-amplify/core\");\nvar auth_1 = require(\"@aws-amplify/auth\");\nvar AuthPiece_1 = require(\"./AuthPiece\");\nvar Amplify_UI_Components_React_1 = require(\"../Amplify-UI/Amplify-UI-Components-React\");\nvar Amplify_UI_Theme_1 = require(\"../Amplify-UI/Amplify-UI-Theme\");\nvar constants_1 = require(\"./common/constants\");\nvar logger = new core_1.ConsoleLogger('SignOut');\nvar SignOut = /** @class */ (function (_super) {\n    __extends(SignOut, _super);\n    function SignOut(props) {\n        var _this = _super.call(this, props) || this;\n        _this.signOut = _this.signOut.bind(_this);\n        core_1.Hub.listen('auth', _this);\n        _this.onHubCapsule = _this.onHubCapsule.bind(_this);\n        _this.state = {};\n        return _this;\n    }\n    SignOut.prototype.componentDidMount = function () {\n        this._isMounted = true;\n        this.findState();\n    };\n    SignOut.prototype.componentWillUnmount = function () {\n        this._isMounted = false;\n    };\n    SignOut.prototype.findState = function () {\n        var _this = this;\n        if (!this.props.authState && !this.props.authData) {\n            auth_1.default.currentAuthenticatedUser()\n                .then(function (user) {\n                _this.setState({\n                    authState: 'signedIn',\n                    authData: user,\n                    stateFromStorage: true\n                });\n            })\n                .catch(function (err) { return logger.error(err); });\n        }\n        else if (this.props.stateFromStorage) {\n            this.setState({\n                stateFromStorage: true\n            });\n        }\n    };\n    SignOut.prototype.onHubCapsule = function (capsule) {\n        if (this._isMounted) {\n            var channel = capsule.channel, payload = capsule.payload, source = capsule.source;\n            if (channel === 'auth' && payload.event === 'signIn') {\n                this.setState({\n                    authState: 'signedIn',\n                    authData: payload.data\n                });\n            }\n            else if (channel === 'auth' && payload.event === 'signOut' && (!this.props.authState)) {\n                this.setState({\n                    authState: 'signIn'\n                });\n            }\n            if (channel === 'auth' && payload.event === 'signIn' && (!this.props.authState)) {\n                this.setState({ stateFromStorage: true });\n            }\n        }\n    };\n    SignOut.prototype.signOut = function () {\n        var _this = this;\n        var payload = {};\n        try {\n            payload = JSON.parse(localStorage.getItem(constants_1.default.AUTH_SOURCE_KEY)) || {};\n            localStorage.removeItem(constants_1.default.AUTH_SOURCE_KEY);\n        }\n        catch (e) {\n            logger.debug(\"Failed to parse the info from \" + constants_1.default.AUTH_SOURCE_KEY + \" from localStorage with \" + e);\n        }\n        logger.debug('sign out from the source', payload);\n        var _a = this.props, googleSignOut = _a.googleSignOut, facebookSignOut = _a.facebookSignOut, amazonSignOut = _a.amazonSignOut, auth0SignOut = _a.auth0SignOut;\n        switch (payload.provider) {\n            case constants_1.default.GOOGLE:\n                if (googleSignOut)\n                    googleSignOut();\n                else\n                    logger.debug('No Google signout method provided');\n                break;\n            case constants_1.default.FACEBOOK:\n                if (facebookSignOut)\n                    facebookSignOut();\n                else\n                    logger.debug('No Facebook signout method provided');\n                break;\n            case constants_1.default.AMAZON:\n                if (amazonSignOut)\n                    amazonSignOut();\n                else\n                    logger.debug('No Amazon signout method provided');\n                break;\n            case constants_1.default.AUTH0:\n                if (auth0SignOut)\n                    auth0SignOut(payload.opts);\n                else\n                    logger.debug('No Auth0 signout method provided');\n                break;\n            default:\n                break;\n        }\n        if (!auth_1.default || typeof auth_1.default.signOut !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        auth_1.default.signOut()\n            .then(function () {\n            if (!_this.state.stateFromStorage) {\n                _this.changeState('signedOut');\n            }\n        })\n            .catch(function (err) { logger.debug(err); _this.error(err); });\n    };\n    SignOut.prototype.render = function () {\n        var hide = this.props.hide;\n        if (hide && hide.includes(SignOut)) {\n            return null;\n        }\n        var authState = this.props.authState || this.state.authState;\n        var signedIn = (authState === 'signedIn');\n        var theme = this.props.theme || Amplify_UI_Theme_1.default;\n        if (!signedIn) {\n            return null;\n        }\n        return (React.createElement(Amplify_UI_Components_React_1.NavButton, { theme: theme, onClick: this.signOut }, core_1.I18n.get('Sign Out')));\n    };\n    return SignOut;\n}(AuthPiece_1.default));\nexports.default = SignOut;\n"},"sourceMaps":{"js":{"version":3,"file":"SignOut.js","sourceRoot":"","sources":["../../src/Auth/SignOut.jsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport * as React from 'react';\nimport { I18n, ConsoleLogger as Logger, Hub } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\n\nimport AuthPiece from './AuthPiece';\nimport { NavButton } from '../Amplify-UI/Amplify-UI-Components-React';\nimport AmplifyTheme from '../Amplify-UI/Amplify-UI-Theme';\n\nimport Constants from './common/constants';\n\nconst logger = new Logger('SignOut');\n\nexport default class SignOut extends AuthPiece {\n    constructor(props) {\n        super(props);\n\n        this.signOut = this.signOut.bind(this);\n        Hub.listen('auth', this)\n        this.onHubCapsule = this.onHubCapsule.bind(this)\n        this.state = {};\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n        this.findState();\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    findState(){\n        if (!this.props.authState && !this.props.authData) {\n            Auth.currentAuthenticatedUser()\n            .then(user => {\n                this.setState({\n                    authState: 'signedIn',\n                    authData: user,\n                    stateFromStorage: true\n                })\n            })\n            .catch(err => logger.error(err));\n        } else if (this.props.stateFromStorage) {\n            this.setState({\n                stateFromStorage: true\n            })\n        }\n    }\n\n    onHubCapsule(capsule) {\n        if (this._isMounted) {\n            const { channel, payload, source } = capsule;\n            if (channel === 'auth' && payload.event === 'signIn') {\n                this.setState({\n                    authState: 'signedIn',\n                    authData: payload.data\n                })\n            } else if (channel === 'auth' && payload.event === 'signOut' && (!this.props.authState)) {\n                this.setState({\n                    authState: 'signIn'\n                })\n            }\n    \n            if (channel === 'auth' && payload.event === 'signIn' && (!this.props.authState)) {\n                this.setState({stateFromStorage: true})\n            }\n        }\n    }\n\n    signOut() {\n        let payload = {};\n        try {\n            payload = JSON.parse(localStorage.getItem(Constants.AUTH_SOURCE_KEY)) || {};\n            localStorage.removeItem(Constants.AUTH_SOURCE_KEY);\n        } catch (e) {\n            logger.debug(`Failed to parse the info from ${Constants.AUTH_SOURCE_KEY} from localStorage with ${e}`);\n        }\n        logger.debug('sign out from the source', payload);\n        const { googleSignOut, facebookSignOut, amazonSignOut, auth0SignOut } = this.props;\n        switch (payload.provider) {\n            case Constants.GOOGLE:\n                if (googleSignOut) googleSignOut();\n                else logger.debug('No Google signout method provided');\n                break;\n            case Constants.FACEBOOK:\n                if (facebookSignOut) facebookSignOut();\n                else logger.debug('No Facebook signout method provided');\n                break;\n            case Constants.AMAZON:\n                if (amazonSignOut) amazonSignOut();\n                else logger.debug('No Amazon signout method provided');\n                break;\n            case Constants.AUTH0:\n                if (auth0SignOut) auth0SignOut(payload.opts);\n                else logger.debug('No Auth0 signout method provided');\n                break;\n            default:\n                break;\n        }\n\n        if (!Auth || typeof Auth.signOut !== 'function') {\n            throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n        }\n        Auth.signOut()\n            .then(() => {\n                if (!this.state.stateFromStorage) {\n                    this.changeState('signedOut');\n                }\n            })\n            .catch(err => { logger.debug(err); this.error(err); });\n    }\n\n    render() {\n        const { hide } = this.props;\n        if (hide && hide.includes(SignOut)) { return null; }\n\n        const authState = this.props.authState || this.state.authState;\n        const signedIn = (authState === 'signedIn');\n\n        const theme = this.props.theme || AmplifyTheme;\n        if (!signedIn) { return null; }\n\n        return (\n            <NavButton\n                theme={theme}\n                onClick={this.signOut}\n            >\n                {I18n.get('Sign Out')}\n            </NavButton>\n        );\n    }\n}\n"]}},"error":null,"hash":"50d6d828a70a138c9e44910761e1ce24","cacheData":{"env":{}}}