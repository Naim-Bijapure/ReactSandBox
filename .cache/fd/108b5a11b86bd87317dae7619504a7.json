{"id":"../node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js.map","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/src/Auth/Provider/withFacebook.jsx","includedInParent":true,"mtime":1552220008284},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552223257578},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/package.json","includedInParent":true,"mtime":1552220008284},{"name":"react","loc":{"line":34,"column":22},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/react/index.js"},{"name":"@aws-amplify/core","loc":{"line":35,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/index.js"},{"name":"@aws-amplify/auth","loc":{"line":36,"column":21},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/auth/lib/index.js"},{"name":"../../Amplify-UI/Amplify-UI-Theme","loc":{"line":37,"column":33},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Theme.js"},{"name":"@aws-amplify/ui","loc":{"line":38,"column":19},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/ui/dist/aws-amplify-ui.js"},{"name":"../../Amplify-UI/Amplify-UI-Components-React","loc":{"line":39,"column":44},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Amplify-UI/Amplify-UI-Components-React.js"},{"name":"../common/constants","loc":{"line":40,"column":26},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/Provider/withFacebook.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/aws-amplify-react/dist/Auth/common/constants.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar core_1 = require(\"@aws-amplify/core\");\nvar auth_1 = require(\"@aws-amplify/auth\");\nvar Amplify_UI_Theme_1 = require(\"../../Amplify-UI/Amplify-UI-Theme\");\nvar ui_1 = require(\"@aws-amplify/ui\");\nvar Amplify_UI_Components_React_1 = require(\"../../Amplify-UI/Amplify-UI-Components-React\");\nvar constants_1 = require(\"../common/constants\");\nvar logger = new core_1.ConsoleLogger('withFacebook');\nfunction withFacebook(Comp) {\n    return /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1(props) {\n            var _this = _super.call(this, props) || this;\n            _this.fbAsyncInit = _this.fbAsyncInit.bind(_this);\n            _this.initFB = _this.initFB.bind(_this);\n            _this.signIn = _this.signIn.bind(_this);\n            _this.signOut = _this.signOut.bind(_this);\n            _this.federatedSignIn = _this.federatedSignIn.bind(_this);\n            _this.state = {};\n            return _this;\n        }\n        class_1.prototype.signIn = function () {\n            var _this = this;\n            var fb = window.FB;\n            fb.getLoginStatus(function (response) {\n                var payload = {\n                    provider: constants_1.default.FACEBOOK\n                };\n                try {\n                    localStorage.setItem(constants_1.default.AUTH_SOURCE_KEY, JSON.stringify(payload));\n                }\n                catch (e) {\n                    logger.debug('Failed to cache auth source into localStorage', e);\n                }\n                if (response.status === 'connected') {\n                    _this.federatedSignIn(response.authResponse);\n                }\n                else {\n                    fb.login(function (response) {\n                        if (!response || !response.authResponse) {\n                            return;\n                        }\n                        _this.federatedSignIn(response.authResponse);\n                    }, {\n                        scope: 'public_profile,email'\n                    });\n                }\n            });\n        };\n        class_1.prototype.federatedSignIn = function (response) {\n            logger.debug(response);\n            var onStateChange = this.props.onStateChange;\n            var accessToken = response.accessToken, expiresIn = response.expiresIn;\n            var date = new Date();\n            var expires_at = expiresIn * 1000 + date.getTime();\n            if (!accessToken) {\n                return;\n            }\n            var fb = window.FB;\n            fb.api('/me', { fields: 'name,email' }, function (response) {\n                var user = {\n                    name: response.name,\n                    email: response.email\n                };\n                if (!auth_1.default ||\n                    typeof auth_1.default.federatedSignIn !== 'function' ||\n                    typeof auth_1.default.currentAuthenticatedUser !== 'function') {\n                    throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n                }\n                auth_1.default.federatedSignIn('facebook', { token: accessToken, expires_at: expires_at }, user)\n                    .then(function (credentials) {\n                    return auth_1.default.currentAuthenticatedUser();\n                }).then(function (authUser) {\n                    if (onStateChange) {\n                        onStateChange('signedIn', authUser);\n                    }\n                });\n            });\n        };\n        class_1.prototype.signOut = function () {\n            var fb = window.FB;\n            if (!fb) {\n                logger.debug('FB sdk undefined');\n                return Promise.resolve();\n            }\n            fb.getLoginStatus(function (response) {\n                if (response.status === 'connected') {\n                    return new Promise(function (res, rej) {\n                        logger.debug('facebook signing out');\n                        fb.logout(function (response) {\n                            res(response);\n                        });\n                    });\n                }\n                else {\n                    return Promise.resolve();\n                }\n            });\n        };\n        class_1.prototype.componentDidMount = function () {\n            var facebook_app_id = this.props.facebook_app_id;\n            if (facebook_app_id && !window.FB)\n                this.createScript();\n        };\n        class_1.prototype.fbAsyncInit = function () {\n            logger.debug('init FB');\n            var facebook_app_id = this.props.facebook_app_id;\n            var fb = window.FB;\n            fb.init({\n                appId: facebook_app_id,\n                cookie: true,\n                xfbml: true,\n                version: 'v2.11'\n            });\n            fb.getLoginStatus(function (response) { return logger.debug(response); });\n        };\n        class_1.prototype.initFB = function () {\n            var fb = window.FB;\n            logger.debug('FB inited');\n        };\n        class_1.prototype.createScript = function () {\n            window.fbAsyncInit = this.fbAsyncInit;\n            var script = document.createElement('script');\n            script.src = 'https://connect.facebook.net/en_US/sdk.js';\n            script.async = true;\n            script.onload = this.initFB;\n            document.body.appendChild(script);\n        };\n        class_1.prototype.render = function () {\n            var fb = window.FB;\n            return (React.createElement(Comp, __assign({}, this.props, { fb: fb, facebookSignIn: this.signIn, facebookSignOut: this.signOut })));\n        };\n        return class_1;\n    }(react_1.Component));\n}\nexports.default = withFacebook;\nvar Button = function (props) { return (React.createElement(Amplify_UI_Components_React_1.SignInButton, { id: ui_1.facebookSignInButton, onClick: props.facebookSignIn, theme: props.theme || Amplify_UI_Theme_1.default, variant: 'facebookSignInButton' },\n    React.createElement(Amplify_UI_Components_React_1.SignInButtonIcon, { theme: props.theme || Amplify_UI_Theme_1.default },\n        React.createElement(\"svg\", { viewBox: '0 0 279 538', xmlns: 'http://www.w3.org/2000/svg' },\n            React.createElement(\"g\", { id: 'Page-1', fill: 'none', fillRule: 'evenodd' },\n                React.createElement(\"g\", { id: 'Artboard', fill: '#FFF' },\n                    React.createElement(\"path\", { d: 'M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z', id: 'Fill-1' }))))),\n    React.createElement(Amplify_UI_Components_React_1.SignInButtonContent, { theme: props.theme || Amplify_UI_Theme_1.default }, core_1.I18n.get('Sign In with Facebook')))); };\nexports.FacebookButton = withFacebook(Button);\n"},"sourceMaps":{"js":{"version":3,"file":"withFacebook.js","sourceRoot":"","sources":["../../../src/Auth/Provider/withFacebook.jsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport * as React from 'react';\nimport { Component } from 'react';\n\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\nimport AmplifyTheme from '../../Amplify-UI/Amplify-UI-Theme';\nimport { facebookSignInButton } from '@aws-amplify/ui';\nimport { \n    SignInButton,\n    SignInButtonIcon,\n    SignInButtonContent\n} from '../../Amplify-UI/Amplify-UI-Components-React';\nimport Constants from '../common/constants';\n\nconst logger = new Logger('withFacebook');\n\nexport default function withFacebook(Comp) {\n    return class extends Component {\n        constructor(props) {\n            super(props);\n\n            this.fbAsyncInit = this.fbAsyncInit.bind(this);\n            this.initFB = this.initFB.bind(this);\n            this.signIn = this.signIn.bind(this);\n            this.signOut = this.signOut.bind(this);\n            this.federatedSignIn = this.federatedSignIn.bind(this);\n\n            this.state = {};\n        }\n\n        signIn() {\n            const fb = window.FB;\n\n            fb.getLoginStatus(response => {\n                const payload = {\n                    provider: Constants.FACEBOOK\n                };\n                try {\n                    localStorage.setItem(Constants.AUTH_SOURCE_KEY, JSON.stringify(payload));\n                } catch (e) {\n                    logger.debug('Failed to cache auth source into localStorage', e);\n                }\n\n                if (response.status === 'connected') {\n                    this.federatedSignIn(response.authResponse);\n                } else {\n                    fb.login(\n                        response => {\n                            if (!response || !response.authResponse) {\n                                return;\n                            }\n                            this.federatedSignIn(response.authResponse);\n                        },\n                        {\n                            scope: 'public_profile,email'\n                        }\n                    );\n                }\n            });\n        }\n\n        federatedSignIn(response) {\n            logger.debug(response);\n            const { onStateChange } = this.props;\n\n            const { accessToken, expiresIn } = response;\n            const date = new Date();\n            const expires_at = expiresIn * 1000 + date.getTime();\n            if (!accessToken) {\n                return;\n            }\n\n            const fb = window.FB;\n            fb.api('/me', { fields: 'name,email' }, response => {\n                const user = {\n                    name: response.name,\n                    email: response.email\n                };\n                if (!Auth || \n                    typeof Auth.federatedSignIn !== 'function' || \n                    typeof Auth.currentAuthenticatedUser !== 'function') {\n                    throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n                }\n                \n                Auth.federatedSignIn('facebook', { token: accessToken, expires_at }, user)\n                .then(credentials => {\n                    return Auth.currentAuthenticatedUser();\n                }).then(authUser => {\n                    if (onStateChange) {\n                        onStateChange('signedIn', authUser);\n                    }\n                });\n            });\n        }\n\n        signOut() {\n            const fb = window.FB;\n            if (!fb) {\n                logger.debug('FB sdk undefined');\n                return Promise.resolve();\n            }\n\n            fb.getLoginStatus(response => {\n                if (response.status === 'connected') {\n                    return new Promise((res, rej) => {\n                        logger.debug('facebook signing out');\n                        fb.logout(response => {\n                            res(response);\n                        });\n                    });\n                } else {\n                    return Promise.resolve();\n                }\n            });\n        }\n\n        componentDidMount() {\n            const { facebook_app_id } = this.props;\n            if (facebook_app_id && !window.FB) this.createScript();\n        }\n\n        fbAsyncInit() {\n            logger.debug('init FB');\n\n            const { facebook_app_id } = this.props;\n            const fb = window.FB;\n            fb.init({\n                appId   : facebook_app_id,\n                cookie  : true,\n                xfbml   : true,\n                version : 'v2.11'\n            });\n\n            fb.getLoginStatus(response => logger.debug(response));\n        }\n\n        initFB() {\n            const fb = window.FB;\n            logger.debug('FB inited');\n        }\n\n        createScript() {\n            window.fbAsyncInit = this.fbAsyncInit;\n\n            const script = document.createElement('script');\n            script.src = 'https://connect.facebook.net/en_US/sdk.js';\n            script.async = true;\n            script.onload = this.initFB;\n            document.body.appendChild(script);\n        }\n\n        render() {\n            const fb = window.FB;\n            return (\n                <Comp {...this.props} fb={fb} facebookSignIn={this.signIn} facebookSignOut={this.signOut}/>\n            );\n        }\n    };\n}\n\nconst Button = (props) => (\n    <SignInButton\n        id={facebookSignInButton}\n        onClick={props.facebookSignIn}\n        theme={props.theme || AmplifyTheme}\n        variant={'facebookSignInButton'}\n    >\n        <SignInButtonIcon theme={props.theme || AmplifyTheme}>\n            <svg viewBox='0 0 279 538' xmlns='http://www.w3.org/2000/svg'><g id='Page-1' fill='none' fillRule='evenodd'><g id='Artboard' fill='#FFF'><path d='M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z'id='Fill-1' /></g></g></svg>\n        </SignInButtonIcon>\n        <SignInButtonContent theme={props.theme || AmplifyTheme}>\n            {I18n.get('Sign In with Facebook')}\n        </SignInButtonContent>\n    </SignInButton>\n);\n\nexport const FacebookButton = withFacebook(Button);\n"]}},"error":null,"hash":"d8f4bd6cf0699dad8380406da053c8ca","cacheData":{"env":{}}}