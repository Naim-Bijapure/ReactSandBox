{"id":"../node_modules/@aws-amplify/core/lib/Hub.js","dependencies":[{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/Hub.js.map","includedInParent":true,"mtime":1552201905760},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/src/Hub.ts","includedInParent":true,"mtime":1552201905760},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/package.json","includedInParent":true,"mtime":1552203475538},{"name":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/package.json","includedInParent":true,"mtime":1552201905760},{"name":"./Logger","loc":{"line":15,"column":23},"parent":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/Hub.js","resolved":"/home/pronoob/Desktop/SandBox/ReactSandBox/node_modules/@aws-amplify/core/lib/Logger/index.js"}],"generated":{"js":"\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logger_1 = require(\"./Logger\");\nvar logger = new Logger_1.ConsoleLogger('Hub');\nvar HubClass = /** @class */ (function () {\n    function HubClass(name) {\n        this.bus = [];\n        this.listeners = {};\n        this.name = name;\n    }\n    HubClass.createHub = function (name) {\n        return new HubClass(name);\n    };\n    HubClass.prototype.dispatch = function (channel, payload, source) {\n        if (source === void 0) { source = ''; }\n        var capsule = {\n            'channel': channel,\n            'payload': Object.assign({}, payload),\n            'source': source\n        };\n        try {\n            this.bus.push(capsule);\n            this.toListeners(capsule);\n        }\n        catch (e) {\n            logger.warn('Hub dispatch error', e);\n        }\n    };\n    HubClass.prototype.listen = function (channel, listener, listenerName) {\n        if (listenerName === void 0) { listenerName = 'noname'; }\n        logger.debug(listenerName + ' listening ' + channel);\n        var holder = this.listeners[channel];\n        if (!holder) {\n            holder = [];\n            this.listeners[channel] = holder;\n        }\n        holder.push({\n            'name': listenerName,\n            'listener': listener\n        });\n    };\n    HubClass.prototype.remove = function (channel, listener, listenerName) {\n        if (listenerName === void 0) { listenerName = 'noname'; }\n        logger.debug(listenerName + ' removing listener ' + channel);\n        var holder = this.listeners[channel];\n        if (holder) {\n            holder = holder.filter(function (_listener) {\n                return !(listener === _listener.listener && listenerName === _listener.name);\n            });\n            this.listeners[channel] = holder;\n        }\n    };\n    HubClass.prototype.toListeners = function (capsule) {\n        var channel = capsule.channel, payload = capsule.payload, source = capsule.source;\n        var holder = this.listeners[channel];\n        if (!holder) {\n            return;\n        }\n        holder.forEach(function (listener) {\n            try {\n                listener.listener.onHubCapsule(capsule);\n            }\n            catch (e) {\n                logger.warn(\"error happend when dispatching \" + channel + \" event to \" + listener.name + \": \" + e);\n            }\n        });\n        this.bus.pop();\n    };\n    return HubClass;\n}());\nexports.HubClass = HubClass;\nvar Hub = new HubClass('__default__');\nexports.default = Hub;\n"},"sourceMaps":{"js":{"version":3,"file":"Hub.js","sourceRoot":"","sources":["../src/Hub.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nimport { ConsoleLogger as Logger } from './Logger';\n\nconst logger = new Logger('Hub');\n\nexport class HubClass {\n    name;\n    bus = [];\n    listeners = {};\n\n    constructor(name) {\n        this.name = name;\n    }\n\n    static createHub(name) {\n        return new HubClass(name);\n    }\n\n    dispatch(channel, payload, source='') {\n        const capsule = {\n            'channel': channel,\n            'payload': Object.assign({}, payload),\n            'source': source\n        };\n\n        try {\n            this.bus.push(capsule);\n            this.toListeners(capsule);\n        } catch (e) {\n            logger.warn('Hub dispatch error', e);\n        }\n    }\n\n    listen(channel, listener, listenerName='noname') {\n        logger.debug(listenerName + ' listening ' + channel);\n\n        let holder = this.listeners[channel];\n        if (!holder) {\n            holder = [];\n            this.listeners[channel] = holder;\n        }\n\n        holder.push({\n            'name': listenerName,\n            'listener': listener\n        });\n    }\n\n    remove(channel, listener, listenerName='noname') {\n        logger.debug(listenerName + ' removing listener ' + channel);\n\n        let holder = this.listeners[channel];\n        if (holder) {\n            holder = holder.filter(_listener =>\n              !(listener === _listener.listener && listenerName === _listener.name)\n            );\n          this.listeners[channel] = holder;\n        }\n    }\n\n    toListeners(capsule) {\n        const { channel, payload, source } = capsule;\n        const holder = this.listeners[channel];\n        if (!holder) { return; }\n\n        holder.forEach(listener => {\n            try {\n                listener.listener.onHubCapsule(capsule);\n            } catch (e) {\n                logger.warn(`error happend when dispatching ${channel} event to ${listener.name}: ${e}`);\n            }\n        });\n\n        this.bus.pop();\n    }\n}\n\nconst Hub = new HubClass('__default__');\nexport default Hub;\n"]}},"error":null,"hash":"3d363b996cc4b5207dc4100a54166ef3","cacheData":{"env":{}}}